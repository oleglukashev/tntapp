<div ng-hide='!ctrl.hasReservations();'>
  <div class='panel'>
    <div class='panel-heading' translate='dashboard.action_required'></div>
    <md-list
      class='no-padder'
      ng-show='ctrl.action_required.length'>
      <md-list-item class='md-no-proxy'
        ng-class='{"active": ctrl.active_part == item.part.id,
                  "cancelled": item.reservation.status == "cancelled",
                  "b-b-none": item.reservation.id === required_data[$index + 1].reservation.id}'
        ng-repeat='item in required_data = ctrl.action_required track by $index'
        ng-mouseup='ctrl.active_part = item.part.id'>
        <reservation-item
          hide-icon='item.reservation.id === required_data[$index - 1].reservation.id'
          change-status='ctrl.changeStatus(reservation, status)'
          show-date=true
          data='item'></reservation-item>
      </md-list-item>

    </md-list>
    <div class='md-padding'
         ng-hide='ctrl.action_required.length'
         translate='none'></div>
  </div>

  <div class='panel'>
    <div class='panel-heading' translate='dashboard.groups'></div>
    <md-list
      class='no-padder'
      ng-show='ctrl.group_this_week.length'>
      <md-list-item class='md-no-proxy'
        ng-class='{"active": ctrl.active_part == item.part.id,
                  "cancelled": item.reservation.status == "cancelled",
                  "b-b-none": item.reservation.id === group_data[$index + 1].reservation.id}'
        ng-repeat='item in group_data = ctrl.group_this_week track by $index'
        ng-mouseup='ctrl.active_part = item.part.id'>
        <reservation-item
          hide-icon='item.reservation.id === group_data[$index - 1].reservation.id'
          change-status='ctrl.changeStatus(reservation, status)'
          show-date=true
          data='item'></reservation-item>
      </md-list-item>
    </md-list>
    <div class='md-padding'
         ng-hide='ctrl.group_this_week.length'
         translate='none'></div>
  </div>

  <button ng-click='ctrl.openReservation()' class='panel-add-button md-btn md-fab m-b'>
    <md-tooltip>{{ 'new_reservation' | translate }}?</md-tooltip>
    <i class='mdi mdi-plus i-24'></i>
  </button>

  <div class='panel'>
    <div class='panel-heading' translate='today'></div>
    <md-list class='no-padder'
             ng-show='ctrl.ReservationPart.partsByDate(ctrl.today, ctrl.moment()).length'>
      <md-list-item class='md-no-proxy'
        ng-class='{"active": ctrl.active_part == item.part.id,
                  "cancelled": item.reservation.status == "cancelled",
                  "b-b-none": item.reservation.id === today_data[$index + 1].reservation.id}'
        ng-repeat='item in today_data = ctrl.ReservationPart.partsByDate(ctrl.today, ctrl.moment()) track by $index'
        ng-mouseup='ctrl.active_part = item.part.id'>
        <reservation-item
          hide-icon='item.reservation.id === today_data[$index - 1].reservation.id'
          change-status='ctrl.changeStatus(reservation, status)'
          show-date=false
          data='item'></reservation-item>
      </md-list-item>
    </md-list>
    <div class='md-padding empty_reservations'
         ng-hide='ctrl.ReservationPart.partsByDate(ctrl.today, ctrl.moment()).length'
         translate='make_first_reservation'></div>
  </div>

  <div class='panel'>
    <div class='panel-heading' translate='dashboard.last_reservation'></div>
    <md-list
      class='no-padder'
      ng-show='ctrl.latest.length'>
      <md-list-item class='md-no-proxy'
        ng-class='{"active": ctrl.active_part == item.part.id,
                  "cancelled": item.reservation.status == "cancelled",
                  "b-b-none": item.reservation.id === latest_data[$index + 1].reservation.id}'
        ng-repeat='item in latest_data = ctrl.latest track by $index'
        ng-mouseup='ctrl.active_part = item.part.id'>
        <reservation-item
          hide-icon='item.reservation.id === latest_data[$index - 1].reservation.id'
          change-status='ctrl.changeStatus(reservation, status)'
          show-date=true
          data='item'></reservation-item>
      </md-list-item>
    </md-list>
    <div class='md-padding'
         ng-hide='ctrl.latest.length'
         translate='none'></div>
  </div>
</div>

<div ng-show='!ctrl.hasReservations();'>
  <button ng-click='ctrl.openReservation();' class='panel-add-button md-btn md-fab m-b'>
    <md-tooltip>{{ 'new_reservation' | translate }}?</md-tooltip>
    <i class='mdi mdi-plus i-24'></i>
  </button>
  <div class='panel'>
    <div class='md-padding empty_reservations' translate='make_first_reservation'></div>
  </div>
</div>  
