<section class='no-margin'>
  <md-toolbar>
    <div class='md-toolbar-tools'>
      <h2 md-truncate flex translate='customers.customer_merge.title'></h2>
      <md-button class='md-icon-button'
                 ng-click='customer_merge.$modalInstance.dismiss("cancel")'
                 md-no-ink>
        <i class='mdi mdi-close m-r-sm i-24'></i>
      </md-button>
    </div>
  </md-toolbar>
  <md-content>
    <div class='wrapper md-content-submit'>
      <div class='panel' ng-repeat='mergeData in customer_merge.mergeData'>
        <div class='panel-heading'>
          <h4>
            {{ mergeData.source.last_name }} {{ mergeData.source.first_name }} (#{{ mergeData.source.id }})
            <i class='mdi mdi-arrow-right' />
            {{ mergeData.target.last_name }} {{ mergeData.target.first_name }} (#{{ mergeData.target.id }})
          </h4>
        </div>
        <div class='panel-body' ng-if='mergeData.data.is_manual'>
          <table class='table m-b-none'>
            <thead>
              <th>Key</th>
              <th>Customer #1 value</th>
              <th>Customer #2 value</th>
            </thead>
            <tbody ng-repeat='(key, value) in mergeData.source'>
              <tr ng-if='customer_merge.canCompareField(key, value, mergeData.target[key])'>
                <td>{{ key | translate }}</td>
                <td>
                  <label>
                    <input type='radio' ng-model='mergeData.data.fields[key]' value='source' />
                    {{ value }}
                  </label>
                </td>
                <td>
                  <label>
                    <input type='radio' ng-model='mergeData.data.fields[key]' value='target' />
                    {{ mergeData.target[key] }}
                  </label>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class='panel-footer'>
          <md-checkbox ng-model='mergeData.data.merge'
                       ng-checked='false'
                       aria-label='{{ "merge" | translate }}'>
            {{ 'merge' | translate }}
          </md-checkbox>
          <md-checkbox ng-model='mergeData.data.ignore'
                       ng-checked='false'
                       aria-label='{{ "ignore" | translate }}'>
            {{ 'ignore' | translate }}
          </md-checkbox>
        </div>
      </div>

      <div ng-show='!customer_merge.mergeData.length'
           class='md-padding text-center'
           translate='none'></div>

      <button type='submit'
              ng-class='{"disabled": !customer_merge.mergeData.length}'
              ng-click='customer_merge.submitForm()'
              class='btn btn-lg btn-success w-full no-top-radius md-content-button'>
        <translate>save</translate>
      </button>
    </div>
  </md-content>
</section>